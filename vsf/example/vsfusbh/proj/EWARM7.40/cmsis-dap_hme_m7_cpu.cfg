source [find interface/cmsis-dap.cfg]

transport select jtag
reset_config trst_and_srst

source [find target/swj-dp.tcl]

set _CHIPNAME hme-m7

set _ENDIAN little

set _WORKAREASIZE 0x1000

set _CPUTAPID 0x4ba00477

swj_newdap $_CHIPNAME cpu -irlen 4 -ircapture 0x1 -irmask 0xf -expected-id $_CPUTAPID
dap create $_CHIPNAME.dap -chain-position $_CHIPNAME.cpu

jtag newtap $_CHIPNAME fpga -irlen 10

set _TARGETNAME $_CHIPNAME.cpu
target create $_TARGETNAME cortex_m -endian $_ENDIAN -dap $_CHIPNAME.dap

$_TARGETNAME configure -work-area-phys 0x20000000 -work-area-size $_WORKAREASIZE -work-area-backup 0

adapter_khz 4000